<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>BINGO GAME</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root{
      --blue:#007bff; --blue-hover:#0056b3; --good:#22c55e; --error:#ef4444;
      --yellow:#ffd500; --text:#111827; --bg:#f8f8f8;
    }
    *{box-sizing:border-box}
    body{
      font-family: Arial, sans-serif;
      text-align:center;
      background:var(--bg);
      margin:0; padding:20px;
      color:var(--text);
    }
    .hidden{display:none}
    h1{font-size:2.5rem;margin:0 0 10px}
    p{font-size:1.05rem; margin:8px 0}
    button{
      padding:10px 20px; font-size:1.1rem; background:var(--blue); color:#fff;
      border:none; border-radius:10px; cursor:pointer; margin:12px 6px; transition:transform .05s ease;
    }
    button:hover{background:var(--blue-hover)}
    button:active{transform:scale(0.98)}
    /* Video */
    iframe{
      margin-top:16px; width:800; height:200px; max-width:95%;
      border:0; background:#000;
    }
    /* Grid 10x5 */
    #grid{
      display:grid; grid-template-columns:repeat(10, 60px); gap:8px;
      justify-content:center; margin:18px auto 8px;
    }
    .cell{
      width:60px; height:60px; background:var(--yellow); color:#000; font-weight:700;
      display:flex; align-items:center; justify-content:center; border-radius:8px; cursor:pointer;
      user-select:none; font-size:1.15rem; box-shadow:0 1px 0 rgba(0,0,0,.15) inset;
      transition:transform .05s ease, box-shadow .2s ease;
    }
    .cell:active{transform:scale(0.98)}
    .correct{
      background:var(--good)!important; color:#fff; pointer-events:none;
      box-shadow:none;
    }
    #bingo-message{
      font-size:3rem; color:var(--good); margin-top:16px; font-weight:800;
    }
    /* Text message (SR-friendly) */
    #message{
      font-size:1.2rem; color:var(--error); margin:10px 0; min-height:1.4em;
    }
    /* Toast de error visible */
    #error-toast{
      position:fixed; top:20px; left:50%; transform:translateX(-50%);
      background:var(--error); color:#fff; padding:12px 18px; border-radius:12px;
      box-shadow:0 10px 25px rgba(0,0,0,.15); display:none; z-index:9999; font-weight:700;
    }
    /* Shake en celda equivocada */
    @keyframes shake {
      0%{transform:translateX(0)}
      20%{transform:translateX(-6px)}
      40%{transform:translateX(6px)}
      60%{transform:translateX(-4px)}
      80%{transform:translateX(4px)}
      100%{transform:translateX(0)}
    }
    .shake{animation:shake .35s linear}
  </style>
</head>
<body>

  <!-- Toast de error -->
  <div id="error-toast" role="alert" aria-live="assertive"></div>

  <!-- Pantalla inicial -->
  <div id="start-screen">
    <h1>BINGO GAME</h1>
    <p>Click the numbers in the correct order to complete the BINGO challenge!Stop the video while you search for the number</p>
    <button id="startBtn">Start</button>
  </div>

  <!-- Pantalla de juego -->
  <div id="game-screen" class="hidden">
    <h1>BINGO GAME</h1>
    <iframe id="game-video" src="" allowfullscreen></iframe>

    <div id="grid" aria-label="Bingo numbers grid"></div>

    <!-- Mensaje accesible (se borra al acertar) -->
    <p id="message" aria-live="polite"></p>

    <div id="bingo-message"></div>
    <button id="restartBtn">Restart</button>
  </div>

  <!-- Confeti -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

  <script>
    // Orden estricto (incluye 6 dos veces, como pediste)
    const correctOrder = [49,18,3,46,12,34,22,9,27,1,38,15,50,4,29,41,6,33,11,20,47,19,36,8,45,23,5,39,14,30,2,44,17,35,25,10,48,32,7,43,21,26,13,37,42,28,31,16,24,40];

    let currentIndex = 0;
    let confettiInterval = null;

    const startScreen = document.getElementById('start-screen');
    const gameScreen  = document.getElementById('game-screen');
    const grid        = document.getElementById('grid');
    const msg         = document.getElementById('message');
    const bingoMsg    = document.getElementById('bingo-message');
    const toast       = document.getElementById('error-toast');
    const video       = document.getElementById('game-video');

    document.getElementById('startBtn').addEventListener('click', startGame);
    document.getElementById('restartBtn').addEventListener('click', restartGame);

    function startGame(){
      startScreen.classList.add('hidden');
      gameScreen.classList.remove('hidden');
      video.src = "https://player.vimeo.com/video/1114880422";
 // Reemplaza con tu enlace (Vimeo/YouTube/etc.)
      buildGrid();
    }

    function buildGrid(){
      grid.innerHTML = '';
      for(let i=1;i<=50;i++){
        const cell = document.createElement('button');
        cell.type = "button";
        cell.className = 'cell';
        cell.textContent = i;
        cell.setAttribute('aria-label', `Number ${i}`);
        cell.addEventListener('click', ()=> onCellClick(cell, i));
        grid.appendChild(cell);
      }
    }

    function onCellClick(cell, number){
      // Si ya completó el juego, ignorar clics
      if(currentIndex >= correctOrder.length) return;

      const expected = correctOrder[currentIndex];

      if(number === expected){
        markCorrect(cell);
        currentIndex++;
        msg.textContent = '';
        if(currentIndex === correctOrder.length){
          finishGame();
        }
      }else{
        showError("ERROR! Try again.");
        blinkWrong(cell);
      }
    }

    function markCorrect(cell){
      cell.classList.add('correct');
      cell.setAttribute('aria-pressed', 'true');
      // Deshabilitar el botón para evitar recliques accidentales
      cell.disabled = true;
    }

    function blinkWrong(cell){
      cell.classList.add('shake');
      setTimeout(()=> cell.classList.remove('shake'), 400);
    }

    function showError(text){
      // Texto accesible bajo la grilla
      msg.textContent = text;
      // Toast visible
      toast.textContent = text;
      toast.style.display = 'block';
      clearTimeout(showError._t);
      showError._t = setTimeout(()=> { toast.style.display = 'none'; }, 1200);
    }

    function finishGame(){
      bingoMsg.textContent = 'BINGO! GOOD JOB!';
      startConfetti();
    }

    function startConfetti(){
      stopConfetti();
      confettiInterval = setInterval(()=>{
        confetti({ particleCount: 120, spread: 70, origin: { y: 0.6 } });
      }, 450);
    }

    function stopConfetti(){
      if(confettiInterval){
        clearInterval(confettiInterval);
        confettiInterval = null;
      }
    }

    function restartGame(){
      stopConfetti();
      currentIndex = 0;
      msg.textContent = '';
      bingoMsg.textContent = '';
      buildGrid();
      // Mantiene el mismo video ya cargado
    }
  </script>
</body>
</html>
